# Story 5.4: Configure Dependabot

## Status
Draft

## Story
**As a** developer,
**I want** Dependabot configured to automatically create PRs for dependency updates,
**so that** security vulnerabilities are addressed promptly and dependencies stay current.

## Acceptance Criteria
1. Dependabot creates weekly PRs for npm dependency updates
2. Dependabot creates weekly PRs for pip dependency updates
3. Dependabot creates weekly PRs for GitHub Actions updates
4. PRs are grouped by category (dev deps, prod deps, security)
5. Critical security updates trigger immediate PRs
6. Dependabot configuration is documented

## Tasks / Subtasks

- [ ] **Task 1: Create Dependabot Config** (AC: 1-4)
  - [ ] Create `.github/dependabot.yml`
  - [ ] Configure npm ecosystem for apps/web
  - [ ] Configure pip ecosystem for apps/api
  - [ ] Configure github-actions ecosystem

- [ ] **Task 2: Configure Update Schedule** (AC: 1-3)
  - [ ] Set weekly schedule for regular updates
  - [ ] Configure timezone for updates
  - [ ] Set PR limits to avoid overwhelming reviewers

- [ ] **Task 3: Configure Grouping** (AC: 4, 5)
  - [ ] Group development dependencies
  - [ ] Group production dependencies
  - [ ] Configure security updates for immediate PR
  - [ ] Set labels for different update types

- [ ] **Task 4: Documentation** (AC: 6)
  - [ ] Document Dependabot behavior in README
  - [ ] Document how to handle Dependabot PRs
  - [ ] Document how to ignore specific updates

## Dev Notes

### Dependabot Config Structure
```yaml
# .github/dependabot.yml
version: 2
updates:
  # NPM dependencies
  - package-ecosystem: "npm"
    directory: "/apps/web"
    schedule:
      interval: "weekly"
      day: "monday"
    groups:
      dev-dependencies:
        dependency-type: "development"
      prod-dependencies:
        dependency-type: "production"
    labels:
      - "dependencies"
      - "npm"

  # Python dependencies
  - package-ecosystem: "pip"
    directory: "/apps/api"
    schedule:
      interval: "weekly"
      day: "monday"
    labels:
      - "dependencies"
      - "python"

  # GitHub Actions
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
    labels:
      - "dependencies"
      - "github-actions"
```

### Security Updates
Dependabot automatically creates PRs for security vulnerabilities immediately, regardless of schedule.

### References
- PRD E0-S7: Configure Dependabot
- PRD NFR32: Dependency scanning shall run weekly

## Testing

### Verification
1. Verify Dependabot config is valid (GitHub will show errors)
2. Wait for first scheduled run and verify PRs are created
3. Verify PRs have correct labels
4. Verify security alerts trigger immediate PRs
5. Verify grouping works as expected

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-18 | 0.1 | Initial story draft | Claude Opus 4.5 |

## Dev Agent Record

### Agent Model Used
(To be filled during implementation)

### Debug Log References
- N/A

### Completion Notes List
(To be filled during implementation)

### File List
**To Create:**
- .github/dependabot.yml

**To Modify:**
- README.md (add Dependabot section)

## QA Results
(To be filled after implementation)
